<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Growyo 401(k)</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body { 
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; 
      padding: 20px; 
      background: var(--tg-theme-bg-color, #fff); 
      color: var(--tg-theme-text-color, #000); 
      margin: 0;
    }
    h1 { color: var(--tg-theme-link-color, #2481cc); text-align: center; }
    input, button { 
      padding: 14px; margin: 10px 0; width: 100%; border-radius: 12px; 
      border: 1px solid #ddd; font-size: 16px; box-sizing: border-box;
    }
    button { 
      background: var(--tg-theme-button-color, #2481cc); 
      color: white; font-weight: bold; border: none; cursor: pointer;
    }
    #result { 
      margin-top: 20px; padding: 16px; background: #f0f8ff; 
      border-radius: 12px; font-size: 18px; text-align: center;
    }
    small { color: #888; font-size: 12px; display: block; margin-top: 20px; }
  </style>
</head>
<body>
  <h1>Growyo 401(k) Easy</h1>
  <p id="welcome" style="text-align:center; font-weight:bold;">Loading...</p>

  <label>Current Age</label>
  <input type="number" id="age" placeholder="e.g. 30" />

  <label>Annual Salary ($)</label>
  <input type="number" id="salary" placeholder="e.g. 80000" />

  <label>Your Contribution (%)</label>
  <input type="number" id="contrib" placeholder="e.g. 6" />

  <label>Employer Match (%)</label>
  <input type="number" id="match" placeholder="e.g. 3" />

  <button onclick="calculate()">Calculate Projection</button>

  <div id="result"></div>
  <small>This is a simulation. Not financial advice. Fees not included for demo.</small>

  <script>
    // Initialize Telegram Mini App
    if (window.Telegram?.WebApp) {
      Telegram.WebApp.ready();
      Telegram.WebApp.expand();
      const user = Telegram.WebApp.initDataUnsafe?.user;
      document.getElementById("welcome").innerText = 
        user ? `Hi ${user.first_name}! Let's grow your 401(k).` : "Hi! Let's grow your 401(k).";
    }

    function calculate() {
      const age = parseInt(document.getElementById("age").value) || 30;
      const salary = parseFloat(document.getElementById("salary").value) || 0;
      const contrib = (parseFloat(document.getElementById("contrib").value) || 0) / 100;
      const match = (parseFloat(document.getElementById("match").value) || 0) / 100;
      const years = Math.max(65 - age, 0);

      if (salary <= 0 || age < 18 || age > 100) {
        document.getElementById("result").innerHTML = "<b>Please enter valid age and salary.</b>";
        return;
      }

      const annualSavings = salary * (contrib + match);
      const months = years * 12;
      let balance = 0;
      const monthlyRate = Math.pow(1.07, 1/12); // 7% annual â†’ monthly

      for (let i = 0; i < months; i++) {
        balance = (balance + annualSavings / 12) * monthlyRate;
      }

      document.getElementById("result").innerHTML = `
        <b>Projected at 65:</b><br>
        <span style="font-size:24px;">$${Math.round(balance).toLocaleString()}</span><br><br>
        <small>Assumes 7% annual return, monthly compounding, no fees.</small>
      `;
    }
  </script>
</body>
</html>
